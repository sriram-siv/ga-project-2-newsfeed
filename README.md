# GA PROJECT 2: NEWSFEED
### [VISIT SITE](https://news-feed-sriri.netlify.app/)

### BRIEF

As a team of 2, create a front end for consuming a publicly available API using React.

In collaboration with [Simon Neil](https://github.com/Simon994)

### TIMEFRAME

This project was designed and completed within 2 days.

### TECHNOLOGIES

* React
* JavaScript (ES6)
* HTML
* CSS
* Sass

### OUTLINE

We decided to use the News API  to build a newsfeed app, where the user would be able to search for news from around the world and filter the results by category, country or source and then optionally add those search criteria to the home page so that a user would be able to have a custom newsfeed.

### PROCESS

We put a few hours into planning the functionality and user stories and recorded it all in a document which really paid off when building the initial framework as it allowed us to focus on individual components without having to rework them too much as we added other features.

The change in structural organisation (using React) along with working with a partner for the first time meant that we spent quite a lot of time on this project adapting our work flow and discussing everything in detail, with a lot of time spent pair programming.

After the first day I took responsibility for constructing the components that would display the stories returned from the API as well as the general styling. This left my partner free to work on the API requests and the search / filter  components.

#### DESIGNING CARDS AND STYLING

The stories are displayed using cards that show the headline along with an image. This then transforms upon a mouse over to show the summary and details instead of the image.

I started the design for these elements by looking for inspiration on the internet; I found a great collection of example cards and took various aspects of them to create my own style. The two main things that the card would consist of were a sliding animation from image to text and a fanning effect of rectangles behind the card as if they were a pile of papers being spread out.

I also decided upon a colour scheme largely inspired by the Recurse Centre website; it is a simple design which emphasises the text content whilst lending it a nice pop with the bright multi-coloured highlights. Using these colours for the fanned cards emphasises the mouse over effect, but it is not overwhelming and the overall perception of the site is still quite simple and focused on the content, just as I had hoped.

![](README/news-card%203.gif)

Taking this inspiration from the Recurse site further I then designed a simple logo for the app in pixel-art style. It was a representation of a newspaper and the inclusion of it in the header of the main page was really effective in adding a bit of character to the app without compromising its simplicity.

![](README/newsfeed-header%203.png)

#### ANIMATION

This was the first time that I had used animations for transitions and it turned out to be a really fun aspect of the whole process. In trying to implement the transition animations I was forced to refactor a lot of the HTML that I had already written to separate the different elements involved in the animation. So, unexpectedly, creating the animation caused me to have a much better understanding of how to structure my HTML and CSS classes. This exercise also gave me a much more detailed understanding of CSS in general as I was forced to use various new properties and find the limitations and workarounds of the ones that I already knew.

![](README/feed-transition%203.gif)

#### WORKING WITH AN EXTERNAL API

Our first issue with the NewsAPI was that the data that was returned didnâ€™t always fit into our designs for the cards. Because the data was sourced from all around the world and sometimes generated by algorithms, the format of it was often not uniform and so we went back to our design and reworked it with the data in mind. 

The next issue was that we were hitting our request limits in a matter of hours; this was exacerbated by the nature of testing, as we were refreshing the pages a lot for every small tweak. The major issue though was that when multiple sources were added to the users feed, there would then be a single request for each one when the homepage was reloaded.

Upon deploying the app online we were shocked to discover that the News API was only available for free use with local requests. We ended up changing the API to GNews, which was actually a good exercise in adapting to new obstacles. We had to make some concessions, such as not being able to search by source name anymore, but overall it was a smooth transition. 

#### CUSTOM FEED

We set out to implement a custom news feed that the user could populate from searches that they carried out. I started by adding some subscribe buttons to the results pages that corresponded with the search parameters. 

![](README/sub-button%203.gif)

Upon clicking the button, the query would be saved to local storage; visiting the homepage would then trigger a series of requests based on the items in local storage.

```javascript
// Saving subscribed keywords to local storage as a CSV list
export const saveKeyword = (keyword) => {
  let list = localStorage.getItem('savedKeywords')
  if (!list) list = keyword
  else if (!list.replace(/_\d*/, '').split(',').includes(keyword)) {
    list += `,${keyword}`
  }
  localStorage.setItem('savedKeywords', list)
}

export const getKeywords = () => {
  const list = localStorage.getItem('savedKeywords')
  if (list) return list.split(',')
  return null
}
```

Unlike the normal search results, the feed consisted of separate groups of data for each saved query. Simply stacking all the results on top of each other with headers in-between meant that some content easily be buried at the bottom of a long page. I solved this by the use of horizontal scrolling containers so that each section would only take up one line of results.

![](README/Screenshot%202020-11-17%20at%2011.23.28%203.png)

#### CREATING A SEARCH-AHEAD FORM

We wanted to have a search ahead for the country and sources input fields, as they would only accept specific values and we felt that a dropdown list was not the best user experience due to the large number of values. 

I started out thinking that this would be a simple problem to solve but it took a lot of tweaking and reworking in the end. The basic premise is that the list of accepted values is kept in an array and when the user types into the field the value is matched against the array using regular expressions. This returns a list of matching values and then a div element is constructed with all these items represented as child elements which have event listeners attached in order to autocomplete the field upon clicking.

```javascript
// Filter list accoding to user input
findMatchingCountries(wordSearched) {
    return this.state.countries.filter(country => {
      return wordSearched.split(' ').every(word => country.name.match(new RegExp(word, 'i')))
    }).map(country => country.name)
}
...
// Insert into DOM
{suggestions.map((item, i) => (
  <div className="autocomplete-item" key={i} onClick={handleAutocomplete}>{item}</div>
))}
```

There were all sorts of quirks to iron out in this implementation with the use of regular expressions, handling empty values, checking for matches upon searching in the case where the user typed out the whole name and styling the element generally.

![](README/search-ahead%203.gif)

### CONCLUSION & KEY LEARNINGS

The experience of producing something in such a short timeframe was stressful yet fun and helped me to understand how to focus my efforts and prioritise tasks while working as a team.

I got a much improved understanding of the mechanics of React as well as some valuable experience working with animations in CSS.

The CSS in general was something that we struggled with as a team; we found that we were often creating overlapping classes as we worked on our separate components and the CSS file ballooned very quickly, leading to reduced readability and merge conflicts.
This was a great learning experience for understanding how to structure the CSS file and classes within it. At the end of the project I refactored the code using Sass and managed to remove a significant amount of code by combining classes and making them more multi-purposed.

### FUTURE IMPROVEMENTS

 Because of the short timeframe we reached the end with a lot of potential improvements in mind. The main one is to increase the options the user has to filter the results, ie. by date, language and querying titles / descriptions specifically.

I also would have liked to allow the feed to be set using more complex queries, combining 2 or more search terms into one subscription.

The app is also designed solely for desktop at the moment, so the addition of responsive design would be a logical next step in its development.

A very useful feature to include for improving performance would be time stamp on each feed subscription that would prevent API requests being sent for a short time after the feed was loaded in order to prevent the request limit being reached.